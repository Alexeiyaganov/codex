{"version":3,"sources":["webpack://codex/webpack/bootstrap","webpack://codex/./node_modules/@codexteam/deeplinker/dist/deeplinker.js","webpack://codex/./node_modules/module-dispatcher/lib/moduleDispatcher.js","webpack://codex/./public/app/css/main.css","webpack://codex/./public/app/js/main.js","webpack://codex/./public/app/js/modules/admin.js","webpack://codex/./public/app/js/modules/ajax.js","webpack://codex/./public/app/js/modules/bestDevelopers.js","webpack://codex/./public/app/js/modules/codeStyling.js","webpack://codex/./public/app/js/modules/core.js","webpack://codex/./public/app/js/modules/dom.js","webpack://codex/./public/app/js/modules/dragndrop.js","webpack://codex/./public/app/js/modules/helpers.js","webpack://codex/./public/app/js/modules/join.js","webpack://codex/./public/app/js/modules/player.js","webpack://codex/./public/app/js/modules/pluginsFilter.js","webpack://codex/./public/app/js/modules/polyfills.js","webpack://codex/./public/app/js/modules/profile.js","webpack://codex/./public/app/js/modules/quiz.js","webpack://codex/./public/app/js/modules/quizForm.js","webpack://codex/./public/app/js/modules/scrollUp.js","webpack://codex/./public/app/js/modules/sharer.js","webpack://codex/./public/app/js/modules/showMoreNews.js","webpack://codex/./public/app/js/modules/transport.js","webpack://codex/./public/app/js/modules/vkWidget.js"],"names":["VK_COMMUNITY_ID","codex","codex_","settings","init","set","docReady","initModules","moduleDispatcher","Library","scrollUp","deeplinker","codeStyling","vkWidget","id","display","communityId","playVideoButton","document","querySelector","Player","default","sourceURL","toggler","wrapperSelector","f","test","readyState","window","setTimeout","admin","join","core","dragndrop","sharer","developer","showMoreNews","polyfills","ajax","profile","helpers","quiz","quizForm","transport","pluginsFilter","module","exports","initDragNDrop","droppableClass","findDraggable","e","target","closest","makeAvatar","elem","avatar","cloneNode","classList","add","parentNode","insertBefore","nextSibling","rollback","removeChild","remove","targetChanged","newTarget","targetPosition","compareDocumentPosition","move","targetReached","itemId","dataset","itemType","type","itemBelowValue","nextElementSibling","ajaxData","success","getElementById","url","data","JSON","stringify","params","log","listType","items","querySelectorAll","i","length","xhr_","xhr","objectToQueryString","a","prefix","s","name","r20","output","key","value","encodeURIComponent","Array","buildParams","replace","obj","l","rbracket","call","console","warn","XMLHTTP","XMLHttpRequest","ActiveXObject","successCallback","async","formData","contentType","beforeSend","open","setRequestHeader","onreadystatechange","status","responseText","send","parseHTML","markup","doc","implementation","createHTMLDocument","toLowerCase","indexOf","documentElement","innerHTML","body","serialize","form","j","len","jLen","formElement","q","urlencode","str","addNameValue","push","nodeName","elements","disabled","checked","options","selected","bind","chBoxes","addEventListener","toggle","event","$","library","js","css","prepare","Promise","all","loadResource","catch","err","then","codeBlocksSelector","codeBlocks","hljs","highlightBlock","arg","staticLength","substr","successFunction","withCredentials","DOM","tagName","classNames","attributes","el","createElement","isArray","attrName","nodeToReplace","replaceWith","replaceChild","elementId","path","instanceName","resourcePrefix","resolve","reject","includes","node","defer","charset","rel","timerLabel","time","onload","timeEnd","onerror","src","href","head","appendChild","defaultHandlers","draggableClass","findDroppable","elementFromPoint","clientX","clientY","avatarRollback","dragObj","shift","style","left","pageX","x","top","pageY","y","onMouseDown","which","touchSupported","clickedAt","toggleSelection","coords","getCoords","onMouseMove","preventDefault","Math","abs","onMouseUp","rect","getBoundingClientRect","pageXOffset","pageYOffset","changedTouches","touch","screenX","screenY","ondragstart","setCookie","expires","domain","toGMTString","cookie","getCookie","dc","begin","end","unescape","substring","getOffset","_x","_y","isNaN","offsetLeft","offsetTop","clientLeft","clientTop","offsetParent","animationClass","joinBlank","joinBlankTextareas","getElementsByTagName","checkUserCanEdit","blankShowAdditionalFieldsButton","showAdditionalFields","textarea","blankAuthBlock","emailInput","blankAdditionalFields","wrapper","overlay","CSS","overlayShowed","overlayLoaded","closeButton","showVideoOverlay","make","video","autoplay","loop","source","videoLoaded","close","blockTools","inlineTools","blockToolsClass","inlineToolsClass","pluginFilters","blockFilterButtonClass","showBlockToolsOnly","inlineFilterButtonClass","showInlineToolsOnly","allToolsFilterButtonClass","showAllPlugins","filterButton","buttonClass","filterAction","buttonAction","toggleTools","toolsToShow","toolsToHide","hideOneType","String","prototype","apply","arguments","Element","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","selector","parentElement","uploadPhotoSuccess","newPhotoURL","settingsPhoto","headerPhoto","quizData","numberOfQuestions","currentQuestion","score","maxScore","quizDataInput","holder","questions","gameProcessing_","UI_","setupQuestionInterface","currentQuestionObj","questionElems","clear","title","optionsHolder","counter","nextButton","createElem","setAttribute","append","showQuestion","removeEventListener","textContent","answers","map","createOption","answerSelected","answer","current","getUserAnswer","showResult","showAnswer","answerStyle","answerIndex","index","answerMessage","message","insertAfter","showCorrectAnswers","result","resultScore","resultMessage","getMessage","social","createSocial","retry","networks","shareType","class","icon","button","shareMessage","location","desc","description","answerObj","text","tag","classes","elems","parent","elemBefore","firstChild","question","parseFloat","currentTarget","messages","resultMessages","sort","b","nodes","questionInsertAnchor","questionInsertButton","resultMessageInsertAnchor","resultMessageInsertButton","resultMessagesHolder","newDOMElement_","element","textNode","createTextNode","attr","attrNode","createAttribute","setAttributeNode","appendAnswerBlock_","questionIndex","answerData","objectIndex","textColumn","scoreColumn","messageColumn","destroyButtonColumn","destroyButton","destroyButtonCross","insertDOMElement_","updateDestroyIcons_","appendQuestionBlock_","questionData","number","titleLabel","answersHolder","answersHead","answersLabel","scoresLabel","messagesLabel","destroyButtonLabel","addAnswerButtonRow","addAnswerButtonColumn","addAnswerButton","addAnswerButtonPlus","appendResultMessageBlock_","messageData","setObjectNumber_","numberTo","container","before","parseInt","destroyObject_","elementIndex","splice","setEventListeners_","onsubmit","json","jsonQuestion","jsonAnswer","jsonMessage","submit","onclick","contains","undefined","addInitialResultMessage_","addInitialQuestion_","setInitialFormParams_","forms","updateInitialDestroyIcons_","render","SCROLL_UP_OFFSET","scrollPage","scrollTo","windowScrollHandler","vkontakte","link","img","popup","facebook","FB_APP_ID","twitter","telegram","socialType","yaCounter32652805","reachGoal","buttonsSelector","assert","shareButtons","click","shareData","PORTION","news","hided","newsItem","item","currentButtonClicked","buttons","input","buttonCallback","submitCallback","action","targetId","isMultiple","multiple","fillForm","alreadyAddedInput","field","FILE_MAX_SIZE","files","getFileObject","validateExtension","validateMIME","validateSize","size","toFixed","className","response","callback","eval","error_description","fileInput","getFile","fileObj","accept","ext","match","maxSize","targetView","VK_API_URI","loadScript","vkApiScript","showWidget","VK","Widgets","Group"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/public/build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./public/app/js/main.js\");\n","!function(e,n){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define([],n):\"object\"==typeof exports?exports.deeplinker=n():e.deeplinker=n()}(window,function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p=\"\",t(t.s=0)}([function(e,n,t){\"use strict\";var o,r,i,u,c,f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};\n/**\n * Helps to set link with custom protocol (to open apps) and usual link (for webpages) to a button\n *\n * @author Taly Guryn <https://github.com/talyguryn>\n * @license MIT\n */e.exports=(o=function(e){\"object\"!==(void 0===e?\"undefined\":f(e))&&c(\"Passed element is not an object\");var n=e.dataset.link||e.href,t=e.dataset.appLink;i(t,n)},r=function(e){e||c(\"Can not open app, because appLink is undefined\");var n=document.createElement(\"iframe\");n.style.display=\"none\",document.body.appendChild(n),null!==n&&(n.src=e)},i=function(e,n){var t=!1;window.addEventListener(\"pagehide\",function(){t=!0},!1),window.addEventListener(\"blur\",function(){t=!0},!1),r(e),setTimeout(function(){t||u(n)},100)},u=function(e){e||c(\"Can not open page because link is undefined\"),window.open(e,\"_blank\")},c=function(e){throw Error(\"[Deeplinker] \"+e)},{click:o,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\".deeplinker\",n=document.querySelectorAll(e);n.length&&Array.prototype.slice.call(n).forEach(function(e){e.addEventListener(\"click\",function(n){n.preventDefault(),o(e)})})},tryToOpenApp:r})}])});","/*!\n * CodeX Module Dispatcher — Initialize frontend Modules from the DOM without inline scripts\n * \n * @copyright CodeX Team <team@ifmo.su>\n * @license MIT https://github.com/codex-team/dispatcher/LICENSE\n * @author @polinashneider https://github.com/polinashneider\n * @version 0.0.1\n */\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.moduleDispatcher=t():e.moduleDispatcher=t()}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=0)}([function(e,t,n){\"use strict\";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){var n=t.name,o=t.element,s=t.settings,i=t.moduleClass;r(this,e),this.name=n,this.element=o,this.settings=s,this.moduleClass=i}return s(e,[{key:\"init\",value:function(){try{console.assert(this.moduleClass.init instanceof Function,\"Module «\"+this.name+\"» should implement init method\"),this.moduleClass.init instanceof Function&&(this.moduleClass.init(this.settings,this.element),console.log(\"Module «\"+this.name+\"» initialized\"))}catch(e){console.warn(\"Module «\"+this.name+\"» was not initialized because of \",e)}}},{key:\"destroy\",value:function(){this.moduleClass.destroy instanceof Function&&(this.moduleClass.destroy(),console.log(\"Module «\"+this.name+\"» destroyed.\"))}}]),e}(),u=function(){function e(t){r(this,e),this.Library=t.Library||window,this.modules=this.findModules(document),this.initModules()}return s(e,[{key:\"findModules\",value:function(e){for(var t=[],n=e.querySelectorAll(\"[data-module]\"),r=n.length-1;r>=0;r--)t.push.apply(t,o(this.extractModulesData(n[r])));return t}},{key:\"extractModulesData\",value:function(e){var t=this,n=[],o=e.dataset.module;return o=o.replace(/\\s+/,\" \"),o.split(\" \").forEach(function(o,r){var s=new i({name:o,element:e,settings:t.getModuleSettings(e,r,o),moduleClass:t.Library[o]});n.push(s)}),n}},{key:\"getModuleSettings\",value:function(e,t,n){var o=e.querySelector(\"module-settings\"),r=void 0;if(!o)return null;try{r=o.textContent.trim(),r=JSON.parse(r)}catch(e){return console.warn(\"Can not parse Module «\"+n+\"» settings bacause of: \"+e),console.groupCollapsed(n+\" settings\"),console.log(r),console.groupEnd(),null}return Array.isArray(r)?r[t]?r[t]:null:0===t?r:(console.warn(\"Wrong settings format. For several Modules use an array instead of object.\"),null)}},{key:\"initModules\",value:function(){console.groupCollapsed(\"ModuleDispatcher\"),this.modules.forEach(function(e){e.init()}),console.groupEnd()}}]),e}();t.default=u}])});","// removed by extract-text-webpack-plugin","/**\n * Import Dispatcher for Frontend Modules initialization\n */\nimport moduleDispatcher from 'module-dispatcher';\n\nrequire('../css/main.css');\n\n/**\n * CodeX community id at vk.com.\n * used by vkWidget module\n */\nconst VK_COMMUNITY_ID = 103229636;\n\nvar codex = (function (codex_) {\n\n    'use strict';\n\n    codex_.settings = {};\n\n    /**\n    * Preparation method\n    */\n    codex_.init = function (settings) {\n\n        /** Save settings or use defaults */\n        for (var set in settings ) {\n\n            this.settings[set] = settings[set] || this.settings[set] || null;\n\n        }\n\n        codex.docReady(function () {\n\n            initModules();\n\n        });\n\n    };\n\n    return codex_;\n\n})({});\n\n/**\n * Function responsible for modules initialization\n * Called no earlier than document is ready\n */\nfunction initModules() {\n\n    new moduleDispatcher({\n        Library : codex\n    });\n\n    codex.scrollUp.init();\n\n    /**\n     * Find elements with \"deeplinker\" class and add click listener\n     *\n     * @param {string} selector\n     */\n    codex.deeplinker.init('.deeplinker');\n\n    codex.codeStyling.init('.article-code__content');\n\n    codex.vkWidget.init({\n        id: 'vk_groups',\n        display: {\n            'mode': 3,\n            'width': 'auto'\n        },\n        communityId: VK_COMMUNITY_ID\n    });\n\n    /**\n     * Acitve play-video buttons\n     */\n    let playVideoButton = document.querySelector('[name=\"js-show-player\"]');\n\n    if (playVideoButton) {\n\n        const Player = require('./modules/player').default;\n\n        new Player({\n            sourceURL: 'public/app/img/products/ar-tester.mp4',\n            toggler: playVideoButton,\n            wrapperSelector : '.product-card--ar-tester'\n        });\n\n    }\n\n}\n\n/**\n* Document ready event listener\n* @usage codex.docReady(function(){ # code ... } );\n*/\ncodex.docReady = function (f) {\n\n    return /in/.test(document.readyState) ? window.setTimeout(codex.docReady, 9, f) : f();\n\n};\n\n/**\n* Pages\n*/\ncodex.admin = require('./modules/admin');\ncodex.join = require('./modules/join');\n\n\n/**\n * Modules\n */\ncodex.core = require('./modules/core');\ncodex.dragndrop = require('./modules/dragndrop');\ncodex.scrollUp = require('./modules/scrollUp');\ncodex.sharer = require('./modules/sharer');\ncodex.developer = require('./modules/bestDevelopers');\n// codex.simpleCode = require('./modules/simpleCodeStyling');\ncodex.showMoreNews = require('./modules/showMoreNews');\ncodex.polyfills = require('./modules/polyfills');\ncodex.ajax = require('./modules/ajax');\ncodex.profile = require('./modules/profile');\ncodex.helpers = require('./modules/helpers');\ncodex.quiz = require('./modules/quiz');\ncodex.quizForm = require('./modules/quizForm');\ncodex.transport = require('./modules/transport');\ncodex.vkWidget = require('./modules/vkWidget');\ncodex.codeStyling = require('./modules/codeStyling');\ncodex.deeplinker = require('@codexteam/deeplinker');\ncodex.pluginsFilter = require('./modules/pluginsFilter');\n\n// codex.writing = require('./modules/writing');\n\n\nmodule.exports = codex;\n\n","/**\n * Admin page methods\n */\nmodule.exports = function (admin) {\n\n    /**\n     * Initializes dragndrop module\n     * @uses  codex.dragndrop\n     */\n    function initDragNDrop() {\n\n        codex.dragndrop({\n            droppableClass: 'list-item',\n\n            findDraggable: function (e) {\n\n                var target = e.target.closest('.draggable');\n\n                if (target) return target.closest('.list-item');\n\n                return null;\n\n            },\n\n            makeAvatar: function (elem) {\n\n                var avatar = {};\n\n                avatar.elem = elem.cloneNode(true);\n                avatar.elem.classList.add('dnd-avatar');\n\n                elem.parentNode.insertBefore(avatar.elem, elem.nextSibling);\n                elem.classList.add('no-display');\n\n                avatar.rollback = function () {\n\n                    avatar.elem.parentNode.removeChild(avatar.elem);\n                    elem.classList.remove('no-display');\n\n                };\n\n                return avatar;\n\n            },\n\n            targetChanged: function (target, newTarget, avatar) {\n\n                if (!newTarget) return;\n\n                var targetPosition = newTarget.compareDocumentPosition(avatar.elem);\n\n                if (targetPosition&4) {\n\n                    newTarget.parentNode.insertBefore(avatar.elem, newTarget);\n\n                } else if (targetPosition&2) {\n\n                    newTarget.parentNode.insertBefore(avatar.elem, newTarget.nextSibling);\n\n                }\n\n            },\n\n            move: function () {},\n\n            targetReached: function (target, avatar, elem) {\n\n                target.parentNode.insertBefore(elem, target.nextSibling);\n\n                avatar.elem.parentNode.removeChild(avatar.elem);\n                elem.classList.remove('no-display');\n\n                var itemId = elem.dataset.id,\n                    itemType = elem.dataset.type,\n                    itemBelowValue = null,\n                    nextSibling;\n\n                if (nextSibling == elem.nextElementSibling) {\n\n                    itemBelowValue = nextSibling.dataset.type + ':' + nextSibling.dataset.id;\n\n                }\n\n                var ajaxData = {\n                    success: function () {\n\n                        document.getElementById('saved').classList.remove('top-menu__saved_hidden');\n\n                        window.setTimeout(function () {\n\n                            document.getElementById('saved').classList.add('top-menu__saved_hidden');\n\n                        }, 1000);\n\n                    },\n                    type: 'POST',\n                    url: '/admin/feed',\n                    data: JSON.stringify({\n                        'item_id': itemId,\n                        'item_type': itemType,\n                        'item_below_value': itemBelowValue\n                    })\n                };\n\n\n                codex.core.ajax(ajaxData);\n\n            }\n        });\n        // body...\n\n    }\n\n    /**\n     * Module initialization\n     * @param  {Object}      params             - init params\n     * @param  {String|null} params.listType    - feed list type (\"cards\"|\"list\")\n     */\n    admin.init = function ( params ) {\n\n        codex.core.log('Initialized.', 'Module admin');\n\n        if ( params.listType == 'cards' ) {\n\n            var items = document.querySelectorAll('.feed-item');\n\n            for (var i = items.length-1; i > -1; i--) {\n\n                items[i].classList.add('draggable');\n                items[i].classList.add('feed-item--dnd');\n                items[i].classList.add('list-item');\n\n            }\n\n        }\n\n        initDragNDrop();\n\n    };\n\n    return admin;\n\n}({});\n","var ajax = function () {\n\n    var xhr_ = function ( xhr ) {\n\n        var objectToQueryString = function (a) {\n\n            var prefix, s, add, name, r20, output;\n\n            s = [];\n            r20 = /%20/g;\n            add = function (key, value) {\n\n                // If value is a function, invoke it and return its value\n                if (typeof value == 'function') {\n\n                    value = value();\n\n                } else {\n\n                    value = value === null ? '' : value;\n\n                }\n\n                s[ s.length ] = encodeURIComponent(key) + '=' + encodeURIComponent(value);\n\n            };\n            if (a instanceof Array) {\n\n                for (name in a) {\n\n                    add(name, a[name]);\n\n                }\n\n            } else {\n\n                for (prefix in a) {\n\n                    buildParams(prefix, a[ prefix ], add);\n\n                }\n\n            }\n            output = s.join('&').replace(r20, '+');\n            return output;\n\n        };\n\n        var buildParams = function (prefix, obj, add) {\n\n            var name, i, l, rbracket;\n\n            rbracket = /\\[\\]$/;\n            if (obj instanceof Array) {\n\n                for (i = 0, l = obj.length; i < l; i++) {\n\n                    if (rbracket.test(prefix)) {\n\n                        add(prefix, obj[i]);\n\n                    } else {\n\n                        buildParams(prefix + '[' + ( typeof obj[i] === 'object' ? i : '' ) + ']', obj[i], add);\n\n                    }\n\n                }\n\n            } else if (typeof obj == 'object') {\n\n                // Serialize object item.\n                for (name in obj) {\n\n                    buildParams(prefix + '[' + name + ']', obj[ name ], add);\n\n                }\n\n            } else {\n\n                // Serialize scalar item.\n                add(prefix, obj);\n\n            }\n\n        };\n\n        xhr.call = function ( data ) {\n\n            if ( !data || !data.url ) {\n\n                console.warn('url wasn\\'t passed into ajax method' );\n                return;\n\n            }\n\n            var XMLHTTP              = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP'),\n                successCallback;\n\n            data.type         = data.type || 'GET';\n            data.url          = data.url;\n            data.async        = data.async || false;\n            data.data         = data.data || '';\n            data.formData     = data.formData || false;\n            data['content-type'] = data.contentType || 'text/html';\n            successCallback      = data.success || successCallback ;\n\n            if ( data.type == 'GET' && data.data ) {\n\n                data.url = /\\?/.test(data.url) ? data.url + '&' + data.data : data.url + '?' + data.data;\n\n            }\n\n            if (data.beforeSend && typeof data.beforeSend == 'function') {\n\n                data.beforeSend.call();\n\n            }\n\n            XMLHTTP.open( data.type, data.url, data.async );\n            XMLHTTP.setRequestHeader('Content-type', data['content-type'] );\n            XMLHTTP.setRequestHeader('Connection', 'close');\n            XMLHTTP.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n            XMLHTTP.onreadystatechange = function () {\n\n                if ( XMLHTTP.readyState == 4 && XMLHTTP.status == 200 && successCallback) {\n\n                    successCallback.call(XMLHTTP.responseText);\n\n                }\n\n            };\n\n            XMLHTTP.send( data.formData || objectToQueryString(data.data) );\n\n        };\n\n\n        xhr.parseHTML = function (markup) {\n\n            var doc = document.implementation.createHTMLDocument('');\n\n            if (markup.toLowerCase().indexOf('<!doctype') > -1) {\n\n                doc.documentElement.innerHTML = markup;\n\n            } else {\n\n                doc.body.innerHTML = markup;\n\n            }\n            return doc;\n\n        };\n\n        /**\n         * Adapted from {@link http://www.bulgaria-web-developers.com/projects/javascript/serialize/}\n         * Changes:\n         *     Ensures proper URL encoding of name as well as value\n         *     Preserves element order\n         *     XHTML and JSLint-friendly\n         *     Disallows disabled form elements and reset buttons as per HTML4 [successful controls]{@link http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2}\n         *         (as used in jQuery). Note: This does not serialize <object>\n         *         elements (even those without a declare attribute) or\n         *         <input type=\"file\" />, as per jQuery, though it does serialize\n         *         the <button>'s (which are potential HTML4 successful controls) unlike jQuery\n         * @license MIT/GPL\n        */\n        xhr.serialize = function (form) {\n\n            'use strict';\n\n            var i, j, len, jLen, formElement, q = [];\n\n            function urlencode(str) {\n\n                // http://kevin.vanzonneveld.net\n                // Tilde should be allowed unescaped in future versions of PHP (as reflected below), but if you want to reflect current\n                // PHP behavior, you would need to add \".replace(/~/g, '%7E');\" to the following.\n                return encodeURIComponent(str).replace(/!/g, '%21').replace(/'/g, '%27').replace(/\\(/g, '%28').\n                    replace(/\\)/g, '%29').replace(/\\*/g, '%2A').replace(/%20/g, '+');\n\n            }\n            function addNameValue(name, value) {\n\n                q.push(urlencode(name) + '=' + urlencode(value));\n\n            }\n            if (!form || !form.nodeName || form.nodeName.toLowerCase() !== 'form') {\n\n                throw 'You must supply a form element';\n\n            }\n            for (i = 0, len = form.elements.length; i < len; i++) {\n\n                formElement = form.elements[i];\n                if (formElement.name === '' || formElement.disabled) {\n\n                    continue;\n\n                }\n                switch (formElement.nodeName.toLowerCase()) {\n\n                    case 'input':\n                        switch (formElement.type) {\n\n                            case 'text':\n                            case 'email':\n                            case 'hidden':\n                            case 'password':\n                            case 'button': // Not submitted when submitting form manually, though jQuery does serialize this and it can be an HTML4 successful control\n                            case 'submit':\n                                addNameValue(formElement.name, formElement.value);\n                                break;\n                            case 'checkbox':\n                            case 'radio':\n                                if (formElement.checked) {\n\n                                    addNameValue(formElement.name, formElement.value);\n\n                                }\n                                break;\n                            case 'file':\n                            // addNameValue(formElement.name, formElement.value); // Will work and part of HTML4 \"successful controls\", but not used in jQuery\n                                break;\n                            case 'reset':\n                                break;\n\n                        }\n                        break;\n                    case 'textarea':\n                        addNameValue(formElement.name, formElement.value);\n                        break;\n                    case 'select':\n                        switch (formElement.type) {\n\n                            case 'select-one':\n                                addNameValue(formElement.name, formElement.value);\n                                break;\n                            case 'select-multiple':\n                                for (j = 0, jLen = formElement.options.length; j < jLen; j++) {\n\n                                    if (formElement.options[j].selected) {\n\n                                        addNameValue(formElement.name, formElement.options[j].value);\n\n                                    }\n\n                                }\n                                break;\n\n                        }\n                        break;\n                    case 'button': // jQuery does not submit these, though it is an HTML4 successful control\n                        switch (formElement.type) {\n\n                            case 'reset':\n                            case 'submit':\n                            case 'button':\n                                addNameValue(formElement.name, formElement.value);\n                                break;\n\n                        }\n                        break;\n\n                }\n\n            }\n\n            return q.join('&');\n\n        };\n\n    };\n\n    return {\n        xhr : xhr_\n    };\n\n}({});\n\nmodule.exports = ajax;\n","/**\n * codex.bestDevelopers module\n * Sets best developers values in admin/user for further output in templates/developers.php\n */\nvar developer = function () {\n\n    var bind = function () {\n\n        var chBoxes = document.querySelectorAll('.developer-checkbox');\n\n        for (var i = chBoxes.length-1; i > -1; i--) {\n\n            chBoxes[i].addEventListener('change', toggle);\n\n        }\n\n    };\n\n    /**\n     * Sends ajax data 0 or 1, whether user is best developer or not\n     * @param {Event} event\n     * @uses codex.core.ajax\n     */\n\n    var toggle = function (event) {\n\n        var data = {\n            data: 'id='+event.target.id+'&value='+(event.target.checked?1:0),\n            url: '/admin/developer'\n        };\n\n        codex.core.ajax(data);\n\n    };\n\n    return {\n        bind: bind\n    };\n\n}();\n\nmodule.exports = developer;\n","/**\n * Code Styling module\n */\nmodule.exports = function codeStyling() {\n\n    'use strict';\n\n    /**\n     * DOM manipulations helper\n     */\n    const $ = require('./dom').default;\n\n    /**\n     * Extrnal library for code styling\n     * @link https://highlightjs.org\n     * @type {Object}\n     */\n    const library = {\n        js: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js',\n        css : '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github-gist.min.css'\n    };\n\n    /**\n     * Loads styling library\n     */\n    let prepare = function () {\n\n        return Promise.all([\n            $.loadResource('JS', library.js, 'highlight'),\n            $.loadResource('CSS', library.css, 'highlight')\n        ]).catch( err => console.warn('Cannot load code styling module: ', err))\n            .then( () => console.log('Code Styling is ready') );\n\n    };\n\n    /**\n     * Finds code blocks and fires highlighting\n     * @param {String} codeBlocksSelector - where to find <code> blocks\n     */\n    let init = function (codeBlocksSelector) {\n\n        let codeBlocks = document.querySelectorAll(codeBlocksSelector);\n\n        if (codeBlocks) {\n\n            prepare().then( () => {\n\n                if (!window.hljs) {\n\n                    console.warn('Code Styling script loaded but not ready');\n                    return;\n\n                }\n\n                for (var i = codeBlocks.length - 1; i >= 0; i--) {\n\n                    window.hljs.highlightBlock(codeBlocks[i]);\n\n                }\n\n            });\n\n        }\n\n    };\n\n    return {\n        init\n    };\n\n}();\n","/**\n* Significant core methods\n*/\nmodule.exports =  function () {\n\n    /** Logging method */\n    var log = function (str, prefix, type, arg) {\n\n        var staticLength = 32;\n\n        if (prefix) {\n\n            prefix = prefix.length < staticLength ? prefix : prefix.substr( 0, staticLength - 2 );\n\n            while (prefix.length < staticLength - 1) {\n\n                prefix += ' ';\n\n            }\n\n            prefix += ':';\n            str = prefix + str;\n\n        }\n\n        type = type || 'log';\n\n        try {\n\n            if ('console' in window && window.console[ type ]) {\n\n                if (arg) console[type](str, arg);\n                else console[type](str);\n\n            }\n\n        } catch(e) {}\n\n    };\n\n    /**\n    * Native ajax method.\n    * @param {Object} data\n    */\n    var ajax = function (data) {\n\n        if (!data || !data.url) {\n\n            return;\n\n        }\n\n        var XMLHTTP          = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP'),\n            successFunction  = function () {};\n\n        data.async           = true;\n        data.type            = data.type || 'GET';\n        data.data            = data.data || '';\n        data['content-type'] = data['content-type'] || 'application/json; charset=utf-8';\n        successFunction     = data.success || successFunction ;\n\n        if (data.type == 'GET' && data.data) {\n\n            data.url = /\\?/.test(data.url) ? data.url + '&' + data.data : data.url + '?' + data.data;\n\n        }\n\n        if (data.withCredentials) {\n\n            XMLHTTP.withCredentials = true;\n\n        }\n\n        if (data.beforeSend && typeof data.beforeSend == 'function') {\n\n            data.beforeSend.call();\n\n        }\n\n        XMLHTTP.open( data.type, data.url, data.async );\n        XMLHTTP.setRequestHeader('Content-type', data['content-type'] );\n        XMLHTTP.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        XMLHTTP.onreadystatechange = function () {\n\n            if (XMLHTTP.readyState == 4 && XMLHTTP.status == 200) {\n\n                successFunction(XMLHTTP.responseText);\n\n            }\n\n        };\n\n        XMLHTTP.send(data.data);\n\n    };\n\n\n    return {\n        ajax : ajax,\n        log : log\n    };\n\n}();\n","/**\n * DOM manipulations methods\n */\nexport default class DOM {\n\n    /**\n     * Helper for making Elements with classname and attributes\n     * @param  {string} tagName           - new Element tag name\n     * @param  {array|string} classNames  - list or name of CSS classname(s)\n     * @param  {Object} attributes        - any attributes\n     * @return {Element}\n     */\n    static make(tagName, classNames, attributes) {\n\n        var el = document.createElement(tagName);\n\n        if ( Array.isArray(classNames) ) {\n\n            el.classList.add(...classNames);\n\n        } else if( classNames ) {\n\n            el.classList.add(classNames);\n\n        }\n\n        for (let attrName in attributes) {\n\n            el[attrName] = attributes[attrName];\n\n        }\n\n        return el;\n\n    }\n\n    /**\n     * Replaces node with\n     * @param {Element} nodeToReplace\n     * @param {Element} replaceWith\n     */\n    static replace(nodeToReplace, replaceWith) {\n\n        return nodeToReplace.parentNode.replaceChild(replaceWith, nodeToReplace);\n\n    }\n\n    /**\n     * getElementById alias\n     * @param {String} elementId\n     */\n    static get(elementId) {\n\n        return document.getElementById(elementId);\n\n    }\n\n    /**\n     * Loads static resourse: CSS or JS\n     * @param {string} type  - CSS|JS\n     * @param {string} path  - resource path\n     * @param {string} inctanceName - unique name of resource\n     * @return Promise\n     */\n    static loadResource(type, path, instanceName) {\n\n        /**\n         * Imported resource ID prefix\n         * @type {String}\n         */\n        const resourcePrefix = 'cdx-resourse';\n\n        return new Promise(function (resolve, reject) {\n\n            if (!type || !['JS', 'CSS'].includes(type)) {\n\n                reject(`Unexpected resource type passed. «CSS» or «JS» expected, «${type}» passed`);\n\n            }\n\n            let node;\n\n            /** Script is already loaded */\n            if ( !instanceName ) {\n\n                reject('Instance name is missed');\n\n            } else if ( document.getElementById(`${resourcePrefix}-${type.toLowerCase()}-${instanceName}`) ) {\n\n                resolve(path);\n\n            }\n\n            if (type === 'JS') {\n\n                node = document.createElement('script');\n                node.async = true;\n                node.defer = true;\n                node.charset = 'utf-8';\n\n            } else {\n\n                node = document.createElement('link');\n                node.rel = 'stylesheet';\n\n            }\n\n            node.id = `${resourcePrefix}-${type.toLowerCase()}-${instanceName}`;\n\n            let timerLabel = `Resource loading ${type} ${instanceName}`;\n\n            console.time(timerLabel);\n\n            node.onload = function () {\n\n                console.timeEnd(timerLabel);\n                resolve(path);\n\n            };\n\n            node.onerror = function () {\n\n                console.timeEnd(timerLabel);\n                reject(path);\n\n            };\n\n            if (type === 'JS') {\n\n                node.src = path;\n\n            } else {\n\n                node.href = path;\n\n            }\n\n            document.head.appendChild(node);\n\n        });\n\n    }\n\n}\n","module.exports = function (settings) {\n\n    var defaultHandlers = {\n        findDraggable: function (e) {\n\n            return e.target.closest('.'+draggableClass);\n\n        },\n\n        findDroppable: function (e) {\n\n            return document.elementFromPoint(e.clientX, e.clientY).closest('.'+droppableClass);\n\n        },\n\n        /**\n         * The simplest makeAvatar method.\n         *\n         * Just set elem to avatar.elem. And remembers element position in document.\n         * If drop isn`t success, returns elem to start position.\n         */\n        makeAvatar: function (elem) {\n\n            var avatar = {};\n\n            var avatarRollback = function () {\n\n                avatar.elem.classList.remove('dnd-default-avatar');\n\n                if (avatar.nextSibling)\n                    avatar.parentNode.insertBefore(avatar.elem, avatar.nextSibling);\n                else\n                    avatar.parentNode.appendChild(avatar.elem);\n\n                delete(dragObj.avatar);\n\n            };\n\n            avatar = {\n                elem: elem,\n                parentNode: elem.parentNode,\n                nextSibling: elem.nextElementSibling,\n                rollback: avatarRollback\n            };\n\n            // Set avatar position: absolute; for drag'n'drop\n            avatar.elem.classList.add('dnd-default-avatar');\n\n            return avatar;\n\n        },\n\n        /**\n         * Highlights droppable elements under cursor with border\n         */\n        targetChanged: function (target, newTarget) {\n\n            if (target) target.classList('dnd-default-target-highlight');\n\n            if (newTarget) newTarget.classList.add('dnd-default-target-highlight');\n\n        },\n\n        move: function (e, avatar, shift) {\n\n            avatar.elem.style.left = e.pageX - shift.x + 'px';\n            avatar.elem.style.top = e.pageY - shift.y + 'px';\n\n        },\n\n        /**\n         * Inserts elem into document if drop is success\n         */\n        targetReached: function (target, avatar, elem) {\n\n            target.classList.remove('dnd-default-target-highlight');\n            target.parentNode.insertBefore(elem, target.nextElementSibling);\n            avatar.elem.classList.remove('dnd-default-avatar');\n\n        }\n    };\n\n    var draggableClass  = settings.draggableClass   || 'draggable',\n        droppableClass   = settings.droppableClass    || 'droppable',\n        findDraggable   = settings.findDraggable    || defaultHandlers.findDraggable,\n        findDroppable    = settings.findDroppable     || defaultHandlers.findDroppable,\n        makeAvatar      = settings.makeAvatar       || defaultHandlers.makeAvatar,\n        targetChanged   = settings.targetChanged    || defaultHandlers.targetChanged,\n        move            = settings.move             || defaultHandlers.move,\n        targetReached   = settings.targetReached    || defaultHandlers.targetReached;\n\n    var dragObj = {};\n\n    var onMouseDown = function (e) {\n\n        /**\n         * Check mouse (which=1 - right mouse button) or touch (which=0 - touch) event.\n         */\n        if (e.which > 1) return;\n\n        e = touchSupported(e);\n\n        dragObj.clickedAt = {\n            x: e.pageX,\n            y: e.pageY\n        };\n\n        dragObj.elem = findDraggable(e);\n\n        if (!dragObj.elem) return;\n\n        toggleSelection();\n\n        var coords = getCoords(dragObj.elem);\n\n        dragObj.shift = {\n            x: e.pageX - coords.x,\n            y: e.pageY - coords.y\n        };\n\n    };\n\n    var onMouseMove = function (e) {\n\n        if (!dragObj.elem) return;\n\n        // Prevent touchmove scroll\n        e.preventDefault();\n\n        e = touchSupported(e);\n\n        // Check mouse offset. If x or y offset <5, assume that it`s accidental move\n        if (Math.abs(e.pageX - dragObj.clickedAt.x) < 5 && Math.abs(e.pageY - dragObj.clickedAt.y) < 5) return;\n\n        if (!dragObj.avatar) {\n\n            dragObj.avatar = makeAvatar(dragObj.elem);\n\n        }\n\n        var newTarget = findDroppable(e);\n\n        if (newTarget != dragObj.target) {\n\n            targetChanged(dragObj.target, newTarget, dragObj.avatar);\n\n            dragObj.target = newTarget;\n\n        }\n\n\n        move(e, dragObj.avatar, dragObj.shift);\n\n    };\n\n    var onMouseUp = function (e) {\n\n        if (e.which > 1) return;\n\n        if (!dragObj.avatar) {\n\n            dragObj = {};\n            return;\n\n        }\n\n        e = touchSupported(e);\n\n        var target = findDroppable(e);\n\n        if (target)\n            targetReached(target, dragObj.avatar, dragObj.elem, e);\n        else\n            dragObj.avatar.rollback();\n\n        dragObj = {};\n\n        toggleSelection();\n\n    };\n\n    var getCoords = function (elem) {\n\n        var rect = elem.getBoundingClientRect();\n\n        return {\n            x: rect.left + window.pageXOffset,\n            y: rect.top + window.pageYOffset\n        };\n\n    };\n\n    var touchSupported = function (e) {\n\n        if (e.changedTouches)\n            var touch = e.changedTouches[0];\n\n        else\n            return e;\n\n        e.pageX = touch.pageX;\n        e.pageY = touch.pageY;\n\n        e.clientX = touch.clientX;\n        e.clientY = touch.clientY;\n\n        e.screenX = touch.screenX;\n        e.screenY = touch.screenY;\n\n        e.target = touch.target;\n\n        return e;\n\n    };\n\n    var toggleSelection = function () {\n\n        document.body.classList.toggle('no-selection');\n\n    };\n\n\n    document.addEventListener('mousedown', onMouseDown);\n    document.addEventListener('touchstart', onMouseDown);\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('touchmove', onMouseMove);\n\n    document.addEventListener('mouseup', onMouseUp);\n    document.addEventListener('touchend', onMouseUp);\n\n    document.ondragstart = function () {\n\n        return false;\n\n    };\n\n};\n","module.exports = (function (helpers) {\n\n    helpers.setCookie = function (name, value, expires, path, domain) {\n\n        var str = name + '='+value;\n\n        if (expires) str += '; expires=' + expires.toGMTString();\n        if (path)    str += '; path=' + path;\n        if (domain)  str += '; domain=' + domain;\n        document.cookie = str;\n\n    };\n\n    helpers.getCookie = function (name) {\n\n        var dc = document.cookie;\n\n        var prefix = name + '=';\n        var begin = dc.indexOf('; ' + prefix);\n\n        if (begin == -1) {\n\n            begin = dc.indexOf(prefix);\n            if (begin !== 0) return null;\n\n        } else\n            begin += 2;\n\n        var end = document.cookie.indexOf(';', begin);\n\n        if (end == -1) end = dc.length;\n\n        return unescape(dc.substring(begin + prefix.length, end));\n\n    };\n\n    helpers.getOffset = function ( el ) {\n\n        var _x = 0;\n        var _y = 0;\n\n        while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {\n\n            _x += (el.offsetLeft + el.clientLeft);\n            _y += (el.offsetTop + el.clientTop);\n            el = el.offsetParent;\n\n        }\n        return { top: _y, left: _x };\n\n    };\n\n    return helpers;\n\n})({});","/**\n * Module for /join page\n * Blocks writing without authorization\n *\n * Toggles into view blankAdditionalFields: Name and Surname, Email\n */\nvar join = function () {\n\n    const animationClass = 'wobble';\n\n    /**\n    * Module initialization\n    */\n    var init = function () {\n\n        var joinBlank = document.getElementById('joinBlank');\n\n        if ( typeof joinBlank != 'undefined' && joinBlank !== null ) {\n\n            var joinBlankTextareas = joinBlank.getElementsByTagName('textarea');\n\n            if (joinBlankTextareas.length) {\n\n                for (var i = joinBlankTextareas.length - 1; i >= 0; i--) {\n\n                    joinBlankTextareas[i].addEventListener('keyup', checkUserCanEdit, false);\n\n                }\n\n            }\n\n        }\n\n        var blankShowAdditionalFieldsButton = document.getElementById('blankShowAdditionalFieldsButton');\n\n        if ( typeof blankShowAdditionalFieldsButton != 'undefined' && blankShowAdditionalFieldsButton !== null ) {\n\n            blankShowAdditionalFieldsButton.addEventListener('click', showAdditionalFields, false);\n\n        }\n\n    };\n\n    /**\n     * Adds wobble-effect to Auth block if user starts typing into textarea unauthorized\n     * @param {Event} event\n     */\n    let checkUserCanEdit = function (event) {\n\n        var textarea       = event.target,\n            blankAuthBlock = document.getElementById('js-join-auth'),\n            emailInput     = document.getElementById('js-email');\n\n        if (blankAuthBlock && !emailInput.value.length ) {\n\n            blankAuthBlock.classList.add(animationClass);\n\n            window.setTimeout(() => blankAuthBlock.classList.remove(animationClass), 450);\n\n            textarea.value = '';\n\n        }\n\n    };\n\n    /**\n     * Toggles into view blankAdditionalFields: Name and Surname, Email\n     * @param {Event} event\n     */\n    var showAdditionalFields = function () {\n\n        var blankAdditionalFields = document.getElementById('blankAdditionalFields');\n\n        blankAdditionalFields.classList.toggle('hide');\n\n    };\n\n    return {\n        init : init\n    };\n\n}({});\n\nmodule.exports = join;\n","/**\n * DOM manipulation methods\n */\nimport $ from './dom';\n\n/**\n * @class  Player\n * @classdesc Simple player on the overlay container\n *\n * @typedef {Player}\n * @property {String} sourceURL - video URL\n * @property {Element} toggler  - Play Button\n * @property {Element} wrapper  - In wich Element player should be added\n * @property {Element} overlay  - Player main container\n * @property {Object} CSS       - CSS dictionary\n *\n */\nexport default class Player {\n\n    /**\n     * @constructor\n     * @param  {String} options.sourceURL        - video URL\n     * @param  {Element} options.toggler         - play button\n     * @param  {String} options.wrapperSelector  - xpath selector for the player holder\n     */\n    constructor({sourceURL, toggler, wrapperSelector}) {\n\n        this.sourceURL = sourceURL;\n        this.toggler = toggler;\n        this.wrapper = document.querySelector(wrapperSelector);\n        this.overlay = null;\n\n        this.CSS = {\n            overlay: 'video-overlay',\n            overlayShowed: 'video-overlay--showed',\n            overlayLoaded: 'video-overlay--loaded',\n            closeButton: 'video-overlay__close'\n        };\n\n        /**\n         * Add Play Button click listener\n         */\n        this.toggler.addEventListener('click', () => {\n\n            this.showVideoOverlay();\n\n        }, false);\n\n    }\n\n    /**\n     * Creates player container and append it to the parent element\n     */\n    showVideoOverlay() {\n\n        this.overlay = $.make('div', this.CSS.overlay);\n\n        let video = $.make('video', null, {\n                autoplay: true,\n                loop: true\n            }),\n            source = $.make('source', null, {\n                src: this.sourceURL,\n                type: 'video/mp4'\n            }),\n            closeButton = $.make('div', this.CSS.closeButton);\n\n        /**\n         * Append <video>\n         */\n        video.appendChild(source);\n        this.overlay.appendChild(video);\n\n        /**\n         * Bind loading callback\n         */\n        video.addEventListener('loadeddata', () => {\n\n            this.videoLoaded();\n\n        });\n\n        /**\n         * Activate close button\n         */\n        this.overlay.appendChild(closeButton);\n        closeButton.addEventListener('click', () => {\n\n            this.close();\n\n        });\n\n        /**\n         * Add overlay to the wrapper\n         */\n        this.wrapper.appendChild(this.overlay);\n        window.setTimeout(() => {\n\n            this.overlay.classList.add(this.CSS.overlayShowed);\n\n        }, 50);\n\n    }\n\n    /**\n     * Video loaded callback\n     * Shows player\n     */\n    videoLoaded() {\n\n        this.wrapper.classList.add(this.CSS.overlayLoaded);\n\n    }\n\n    /**\n     * Removes overlay with video\n     */\n    close() {\n\n        this.overlay.remove();\n        this.overlay = null;\n\n    }\n\n}\n","'use strict';\n\n/**\n * Plugins filter on editor landing page\n */\nmodule.exports = (function () {\n\n    /**\n     * Block plugins\n     */\n    let blockTools;\n\n    /**\n     * Inline Tool plugins\n     */\n    let inlineTools;\n\n    /**\n     * Initialize module\n     * @typedef {Object} settings                             - module's parameters passed from ModuleDispatcher\n     * @param   {String} settings.blockToolsClass             - class of Editor Block Tools\n     * @param   {String} settings.inlineToolsClass            - class of Editor Inline Tools\n     * @param   {String} settings.blockFilterButtonClass      - class of button Block Tools filter\n     * @param   {String} settings.inlineFilterButtonClass     - class of button Inline Tools filter\n     * @param   {String} settings.allToolsFilterButtonClass   - class of button showing all types of Tools\n     */\n    const init = function (settings) {\n\n        blockTools = document.querySelectorAll(settings.blockToolsClass);\n        inlineTools = document.querySelectorAll(settings.inlineToolsClass);\n\n        const pluginFilters = [\n            {\n                'buttonClass': settings.blockFilterButtonClass,\n                'buttonAction': showBlockToolsOnly\n            },\n            {\n                'buttonClass': settings.inlineFilterButtonClass,\n                'buttonAction': showInlineToolsOnly\n            },\n            {\n                'buttonClass': settings.allToolsFilterButtonClass,\n                'buttonAction': showAllPlugins\n            }\n        ];\n\n        /**\n         * Add event listener if filter button exists, otherwise show console message\n         */\n        for (let j = 0; j < pluginFilters.length; j++) {\n\n            let filterButton = document.querySelector(pluginFilters[j].buttonClass);\n            let buttonClass  = pluginFilters[j].buttonClass;\n            let filterAction = pluginFilters[j].buttonAction;\n\n            if (filterButton) {\n\n                filterButton.addEventListener('click', filterAction);\n\n            } else {\n\n                console.warn('Can\\'t find button with class: «' + buttonClass + '»');\n\n            }\n\n        }\n\n    };\n\n    /**\n     * Show only Inline Tools, hide Blocks\n     */\n    const showInlineToolsOnly = function () {\n\n        toggleTools(inlineTools, blockTools);\n\n    };\n\n    /**\n     * Show only Blocks, hide Inline Tools\n     */\n    const showBlockToolsOnly = function () {\n\n        toggleTools(blockTools, inlineTools);\n\n    };\n\n    /**\n     * Show all types of Editor Tools\n     */\n    const showAllPlugins = function () {\n\n        toggleTools(inlineTools, blockTools, false);\n\n    };\n\n    /**\n     * Toggle Editor Block and Inline Tools into view\n     * @param {HTMLCollection} toolsToShow - Block or Inline Editor's Tools to show\n     * @param {HTMLCollection} toolsToHide - Block or Inline Editor's Tools to hide\n     * @param {Boolean} hideOneType        - pass false to show both Block and Inline Tools\n     */\n    const toggleTools = function (toolsToShow, toolsToHide, hideOneType = true) {\n\n        for (let i = 0; i < toolsToHide.length; i ++) {\n\n            toolsToHide[i].classList.toggle('hide', hideOneType);\n\n        }\n\n        for (let i = 0; i < toolsToShow.length; i ++) {\n\n            toolsToShow[i].classList.toggle('hide', false);\n\n        }\n\n    };\n\n    return {\n        init : init\n    };\n\n}({}));","\nvar polyfills = function () {\n\n    /**\n     * Polyfilling ECMAScript 6 method String.includes\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes#Browser_compatibility\n     */\n    if ( !String.prototype.includes ) {\n\n        String.prototype.includes = function () {\n\n            'use strict';\n\n            return String.prototype.indexOf.apply(this, arguments) !== -1;\n\n        };\n\n    }\n\n\n    /**\n     * Polyfill for Element.prototype.matches method\n     */\n    if (!Element.prototype.matches) {\n\n        Element.prototype.matches = Element.prototype.matchesSelector ||\n                                        Element.prototype.webkitMatchesSelector ||\n                                        Element.prototype.mozMatchesSelector ||\n                                        Element.prototype.msMatchesSelector;\n\n    }\n\n    /**\n     * Polyfill for Element.prototype.closest method\n     */\n    if (!Element.prototype.closest) {\n\n        Element.prototype.closest = function (selector) {\n\n            var node = this;\n\n            while (node) {\n\n                if (node.matches(selector)) return node;\n                node = node.parentElement;\n\n            }\n\n            return null;\n\n        };\n\n    };\n\n}({});\n\nmodule.exports = polyfills;\n","/**\n * Profile page methods\n */\nmodule.exports = function () {\n\n    /**\n     * Photo uploading success-callback\n     * Fired by transport\n     * @param  {string} newPhotoURL - uploaded file URL\n     */\n    var uploadPhotoSuccess = function (newPhotoURL) {\n\n        var settingsPhoto = document.getElementById('profile-photo-updatable'),\n            headerPhoto   = document.getElementById('header-avatar-updatable');\n\n        settingsPhoto.src = newPhotoURL;\n        headerPhoto.src   = newPhotoURL;\n\n    };\n\n    return {\n        uploadPhotoSuccess,\n    };\n\n}();\n","/**\n * Модуль quiz с единственным публичным методом quiz.init()\n */\nmodule.exports = (function () {\n\n    var quizData            = null,\n        numberOfQuestions   = null,\n        currentQuestion     = null,\n        score               = null,\n        maxScore            = null;\n\n\n    /**\n     * Публичный метод init.\n     *\n     * @param {object} quizDataInput  - объект с информацией о тесте\n     * @param {string} holder - id элемента, в который будет выводиться тест\n     */\n    var init = function (quizDataInput, holder) {\n\n        quizData = quizDataInput;\n        numberOfQuestions = quizData.questions.length;\n        currentQuestion = 0;\n        score = 0;\n\n        gameProcessing_.prepare();\n        UI_.prepare(holder);\n        UI_.setupQuestionInterface();\n\n    };\n\n    var UI_ = {\n\n        holder: null,\n        currentQuestionObj: null,\n\n        // Объект, в котором будут храниться DOM-элементы, связанные с отображением вопроса\n        questionElems: null,\n\n        prepare: function (holder) {\n\n            UI_.holder = document.getElementById(holder);\n            UI_.holder.classList.add('quiz');\n            UI_.holder.classList.add('clearfix');\n\n        },\n\n        /**\n         * Создаем элементы для вывода теста, заносим их в UI_.questionElems и выводим на страницу.\n         */\n        setupQuestionInterface: function () {\n\n            UI_.clear();\n\n            var title,\n                optionsHolder,\n                counter,\n                nextButton;\n\n            title = UI_.createElem('div', 'quiz__question-title');\n\n            optionsHolder = UI_.createElem('div', 'quiz__question-options');\n\n            counter = UI_.createElem('div', 'quiz__question-counter');\n\n            nextButton = UI_.createElem('input', ['quiz__question-button', 'quiz__question-button_next']);\n\n            nextButton.setAttribute('type', 'button');\n            nextButton.setAttribute('value', 'Далее →');\n\n            UI_.questionElems = {\n                counter: counter,\n                title: title,\n                optionsHolder: optionsHolder,\n                options: [],\n                nextButton: nextButton\n            };\n\n            UI_.append(UI_.questionElems);\n\n            UI_.showQuestion();\n\n        },\n\n        /**\n         * Выводим текущий вопрос на страницу (вопрос, варианты ответа и счетчик)\n         */\n        showQuestion: function () {\n\n            UI_.clear(UI_.questionElems.optionsHolder);\n            UI_.questionElems.options = [];\n            UI_.questionElems.nextButton.removeEventListener('click', UI_.showQuestion);\n            UI_.currentQuestionObj = quizData.questions[currentQuestion];\n\n            UI_.questionElems.nextButton.setAttribute('disabled', true);\n\n            UI_.questionElems.title.textContent = UI_.currentQuestionObj.title;\n            UI_.questionElems.counter.textContent = currentQuestion + 1 + '/' + numberOfQuestions;\n\n            UI_.currentQuestionObj.answers.map(UI_.createOption);\n\n        },\n\n        answerSelected: function (answer) {\n\n            answer.classList.add('quiz__question-answer_selected');\n\n            UI_.questionElems.options.map(function (current) {\n\n                current.removeEventListener('click', gameProcessing_.getUserAnswer);\n\n            });\n\n            UI_.questionElems.nextButton.disabled = false;\n\n            if (currentQuestion < numberOfQuestions  - 1) {\n\n                UI_.questionElems.nextButton.addEventListener('click', UI_.showQuestion);\n\n            } else {\n\n                UI_.questionElems.nextButton.addEventListener('click', UI_.showResult);\n\n            }\n\n            UI_.showAnswer(answer);\n\n            currentQuestion++;\n\n        },\n        /**\n         * Добавляем стили и выводим сообщение для выбранного варианта ответа\n         * Открываем доступ к следующему вопросу\n         *\n         * @param {Element} answer - DOM-элемент выбранного ответа\n         */\n        showAnswer: function (answer) {\n\n            var answerStyle = answer.dataset.score > 0 ? '_right' :  '_wrong',\n                answerIndex = answer.dataset.index;\n\n            answer.classList.add('quiz__question-answer' + answerStyle);\n\n            var answerMessage = UI_.createElem('div', 'quiz__answer-message');\n\n            answerMessage.textContent = UI_.currentQuestionObj.answers[answerIndex].message;\n\n            UI_.insertAfter(answerMessage, answer);\n\n            if (answer.dataset.score == 0) {\n\n                UI_.showCorrectAnswers();\n\n            }\n\n        },\n\n        showCorrectAnswers: function () {\n\n            UI_.questionElems.options.map(function (answer) {\n\n                if (answer.dataset.score > 0) {\n\n                    answer.classList.add('quiz__question-answer_right');\n\n                } else {\n\n                    answer.classList.add('quiz__question-answer_wrong');\n\n                }\n\n            });\n\n        },\n\n        showResult: function () {\n\n            var result =  score + '/' + maxScore;\n\n            UI_.questionElems.nextButton.removeEventListener('click', UI_.showResult);\n\n            UI_.clear();\n\n            var resultScore = UI_.createElem('div', 'quiz__result-score');\n\n            resultScore.textContent = result;\n\n            var resultMessage = UI_.createElem('div', 'quiz__result-message');\n\n            resultMessage.textContent = gameProcessing_.getMessage();\n\n            var social = UI_.createElem('div', 'quiz__sharing');\n\n            UI_.createSocial(social, result);\n\n            var retry = UI_.createElem('div', 'quiz__retry-button');\n\n            retry.textContent = 'Пройти еще раз';\n            retry.addEventListener('click', init.bind(null, quizData, UI_.holder.id));\n\n            UI_.append([resultScore, resultMessage, social, retry]);\n\n            codex.sharer.init();\n\n        },\n\n        /**\n         * Создаем кнопки социальных сетей и добавляем их в holder\n         *\n         * @param {Element} holder\n         */\n        createSocial: function (holder, result) {\n\n            var networks = [\n                {\n                    title: 'Share on the VK',\n                    shareType: 'vkontakte',\n                    class: 'vk',\n                    icon: 'icon-vkontakte'\n                },\n                {\n                    title: 'Share on the Facebook',\n                    shareType: 'facebook',\n                    class: 'fb',\n                    icon: 'icon-facebook-squared'\n                },\n                {\n                    title: 'Tweet',\n                    shareType: 'twitter',\n                    class: 'tw',\n                    icon: 'icon-twitter'\n                },\n                {\n                    title: 'Forward in Telegramm',\n                    shareType: 'telegram',\n                    class: 'tg',\n                    icon: 'icon-paper-plane'\n                }\n            ];\n\n            networks.map(function (current) {\n\n                var button = UI_.createElem('span', ['but', current.class]),\n                    icon   = UI_.createElem('i', current.icon),\n                    shareMessage = null;\n\n                button.dataset.shareType = current.shareType;\n                button.setAttribute('title', current.title);\n\n                if (quizData.shareMessage) {\n\n                    shareMessage =  quizData.shareMessage.replace('$score', result);\n\n                }\n\n                shareMessage = shareMessage || 'Я набрал ' + result + ' в ' + (quizData.title || 'тесте от команды CodeX');\n\n                button.dataset.url      = window.location.href;\n                button.dataset.title    = shareMessage;\n                button.dataset.desc     = quizData.description || '';\n\n                UI_.append(icon, button);\n                UI_.append(button, holder);\n\n            });\n\n        },\n\n        /**\n         * Создаем i-й вариант ответа и выводим в UI_.questionElems.optionsHolder\n         * И добавляем в UI_.questionElems.options\n         *\n         * @param {Object} answer - объект варианта ответа\n         * @param {int} i - его номер в вопросе\n         */\n        createOption: function (answer, i) {\n\n            var answerObj = UI_.createElem('div', 'quiz__question-answer');\n\n            answerObj.dataset.score = answer.score;\n            answerObj.dataset.index = i;\n            answerObj.textContent = answer.text;\n\n            // Вешаем слушатель на вариант ответа\n            answerObj.addEventListener('click', gameProcessing_.getUserAnswer);\n\n            UI_.questionElems.options.push(answerObj);\n\n            UI_.append(answerObj, UI_.questionElems.optionsHolder);\n\n        },\n\n        /**\n         * Создает новый DOM-элемент с набором переданных классов\n         *\n         * @param {string} tag - имя тега\n         * @param {string|Array} classes - имя или массив имен классов\n         * @returns {Element}\n         */\n        createElem: function (tag, classes) {\n\n            var elem = document.createElement(tag);\n\n            if (!classes) {\n\n                return elem;\n\n            }\n\n            if (classes instanceof Array) {\n\n                for (var i in classes) {\n\n                    elem.classList.add(classes[i]);\n\n                }\n\n            } else {\n\n                elem.classList.add(classes);\n\n            }\n\n            return elem;\n\n        },\n\n        /**\n         * Добавляет элементы в переданный элемент\n         *\n         * @param {Element|Array} elems - элемент или массив элементов\n         * @param {Element|null} parent - родитель или UI_.holder, если передан NULL\n         */\n        append: function (elems, parent) {\n\n            parent = parent || UI_.holder;\n\n            if (!(elems instanceof Element)) {\n\n                for (var i in elems) {\n\n                    if (elems[i] instanceof Element) {\n\n                        parent.appendChild(elems[i]);\n\n                    }\n\n                }\n\n            } else {\n\n                parent.appendChild(elems);\n\n            }\n\n        },\n\n\n        /**\n         * Вставляет элемент после переданного элемента\n         *\n         * @param {Element} elem\n         * @param {Element} elemBefore\n         */\n        insertAfter: function (elem, elemBefore) {\n\n            if (elemBefore.nextSibling) {\n\n                UI_.questionElems.optionsHolder.insertBefore(elem, elemBefore.nextSibling);\n\n            } else {\n\n                UI_.append(elem, elemBefore.parentNode);\n\n            }\n\n        },\n\n        /**\n         * Удалаяет все дочерние элементы элемента parent\n         *\n         * @param {Element} parent\n         */\n        clear: function (parent) {\n\n            parent = parent || UI_.holder;\n\n            while (parent.firstChild) {\n\n                parent.removeChild(parent.firstChild);\n\n            }\n\n        }\n\n    };\n\n    var gameProcessing_ = {\n\n        prepare: function () {\n\n            maxScore = 0;\n\n            quizData.questions.map(function (question) {\n\n                question.answers.map(function (answer) {\n\n                    maxScore += parseFloat(answer.score);\n\n                });\n\n            });\n\n        },\n\n        /**\n         * Добавляет баллы за ответ\n         *\n         * @param {Object} e - объект события клика по варианту ответа\n         */\n        getUserAnswer: function (e) {\n\n            var answer = e.currentTarget;\n\n            score += parseFloat(answer.dataset.score);\n\n            UI_.answerSelected(answer);\n\n        },\n\n        /**\n         * Получает сообщение о результате для набранного количества баллов\n         *\n         * @returns {string} message\n         */\n        getMessage: function () {\n\n            var messages = quizData.resultMessages,\n                message;\n\n            messages.sort(function (a, b) {\n\n                return a['score'] - b['score'];\n\n            });\n\n            if (!messages.length) {\n\n                return;\n\n            }\n\n            for (var i in messages) {\n\n                if (score < messages[i]['score']) {\n\n                    break;\n\n                }\n\n                message = messages[i]['message'];\n\n            }\n\n            return message;\n\n        }\n\n    };\n\n    return {\n        init: init\n    };\n\n})();\n","/**\n* Quiz form client handler\n* Author: @ndawn\n* Date: 09/12/16\n*/\n\nmodule.exports = (function (quiz) {\n\n    /**\n    * Quiz form\n    * @var {null} quiz.form - form DOM element\n    */\n    quiz.form = null;\n\n\n    /**\n    * Nodes list\n    * @var {object} quiz.nodes - dict of DOM elements of questions and result messages\n    */\n    quiz.nodes = {\n        'title': null,\n        'description': null,\n        'questions': [],\n        'resultMessages': [],\n        'shareMessage': null\n    };\n\n\n    /**\n    * Question insert button and anchor for new questions\n    * @var {Element} quiz.questionInsertAnchor - DOM element of question insert anchor\n    * @var {Element} quiz.questionInsertButton - DOM element of question insert button\n    */\n    quiz.questionInsertAnchor = null;\n    quiz.questionInsertButton = null;\n\n\n    /**\n    * Result message insert button and anchor for new resultMessages\n    * @var {Element} quiz.resultMessageInsertAnchor - DOM element of result message insert anchor\n    * @var {Element} quiz.resultMessageInsertButton - DOM element of result message insert button\n    */\n    quiz.resultMessageInsertAnchor = null;\n    quiz.resultMessageInsertButton = null;\n\n\n    /**\n    * Result messages holder element\n    * @var {Element} quiz.resultMessagesHolder - DOM element of result messages holder\n    */\n    quiz.resultMessagesHolder = null;\n\n\n    /**\n    * @private\n    * DOM element creating function\n    * Creates a DOM element with given attributes\n    * @param {string} tag - HTML tag of the element\n    * @param {object} attributes - dictionary with attributes to be added to the element\n    */\n    var newDOMElement_ = function (tag, attributes, text) {\n\n        text = text || '';\n        var element = document.createElement(tag);\n        var textNode = document.createTextNode(text);\n\n        element.appendChild(textNode);\n\n        for (var attr in attributes) {\n\n            var attrNode = document.createAttribute(attr);\n\n            attrNode.value = attributes[attr];\n            element.setAttributeNode(attrNode);\n\n        }\n\n        return element;\n\n    };\n\n\n    /**\n    * @private\n    * Answer block creating function\n    * Creates a couple of DOM elements and appends them to question answers list\n    * @param {number} questionIndex - index of question which answer to be appended to\n    */\n    var appendAnswerBlock_ = function (questionIndex, answerData) {\n\n        var answer = {};\n        var question = quiz.nodes.questions[questionIndex];\n        var objectIndex = question.answers.length;\n\n        answerData = answerData || {};\n\n        answer.holder = newDOMElement_('tr', {\n            'class': 'quiz-form__question-answer-holder',\n            'data-question-index': questionIndex,\n            'data-object-index': objectIndex\n        });\n\n        answer.textColumn = newDOMElement_('td', {\n            'class': 'quiz-form__question-answer-text-column'\n        });\n\n        answer.text = newDOMElement_('input', {\n            'type': 'text',\n            'class': 'quiz-form__question-answer-text',\n            'value': answerData.text || '',\n            'required': '',\n            'form': 'null'\n        });\n\n        answer.scoreColumn = newDOMElement_('td', {\n            'class': 'quiz-form__question-answer-score-column'\n        });\n\n        answer.score = newDOMElement_('input', {\n            'type': 'number',\n            'min': '0',\n            'step': '1',\n            'value': answerData.score || '0',\n            'class': 'quiz-form__question-answer-score',\n            'required': '',\n            'form': 'null'\n        });\n\n        answer.messageColumn = newDOMElement_('td', {\n            'class': 'quiz-form__question-answer-message-column'\n        });\n\n        answer.message = newDOMElement_('input', {\n            'type': 'text',\n            'class': 'quiz-form__question-answer-message',\n            'value': answerData.message || '',\n            'required': '',\n            'form': 'null'\n        });\n\n        answer.destroyButtonColumn = newDOMElement_('td', {\n            'class': 'quiz-form__question-answer-destroy-button-column'\n        });\n\n        answer.destroyButton = newDOMElement_('span', {\n            'class': 'quiz-form__question-answer-destroy-button'\n        });\n\n        answer.destroyButtonCross = newDOMElement_('img', {\n            'class': 'quiz-form__button-cross',\n            'src': '/public/app/img/quizzes/cross.svg'\n        });\n\n        answer.textColumn.appendChild(answer.text);\n        answer.scoreColumn.appendChild(answer.score);\n        answer.messageColumn.appendChild(answer.message);\n\n        answer.destroyButton.appendChild(answer.destroyButtonCross);\n\n        answer.destroyButtonColumn.appendChild(answer.destroyButton);\n\n        answer.holder.appendChild(answer.textColumn);\n        answer.holder.appendChild(answer.scoreColumn);\n        answer.holder.appendChild(answer.messageColumn);\n        answer.holder.appendChild(answer.destroyButtonColumn);\n\n        question.answers.push(answer);\n\n        insertDOMElement_(answer);\n\n        updateDestroyIcons_(question.answers);\n\n    };\n\n\n    /**\n    * @private\n    * Question element creating function\n    * Creates a question JS object with DOM elements in it and appends it to the questions list\n    */\n    var appendQuestionBlock_ = function (questionData) {\n\n        var question = {};\n        var objectIndex = quiz.nodes.questions.length;\n\n        questionData = questionData || {};\n\n        question.holder = newDOMElement_('div', {\n            'class': 'quiz-form__question-holder',\n            'data-object-index': objectIndex\n        });\n\n        question.number = newDOMElement_('label', {\n            'class': 'quiz-form__question-number'\n        }, 'Вопрос ' + (objectIndex + 1));\n\n        question.destroyButton = newDOMElement_('span', {\n            'class': 'quiz-form__question-destroy-button'\n        });\n\n        question.destroyButtonCross = newDOMElement_('img', {\n            'class': 'quiz-form__button-cross',\n            'src': '/public/app/img/quizzes/cross.svg'\n        });\n\n        question.titleLabel = newDOMElement_('label', {\n            'class': 'quiz-form__label quiz-form__question-title-label'\n        }, 'Заголовок вопроса');\n\n        question.title = newDOMElement_('input', {\n            'type': 'text',\n            'class': 'quiz-form__question-title',\n            'value': questionData.title || '',\n            'required': '',\n            'form': 'null'\n        });\n\n        question.answers = [];\n\n        question.answersHolder = newDOMElement_('table', {\n            'class': 'quiz-form__question-answers-holder'\n        });\n\n        question.answersHead = newDOMElement_('thead', {\n            'class': 'quiz-form__question-answers-head'\n        });\n\n        question.answersLabel = newDOMElement_('th', {\n            'class': 'quiz-form__label quiz-form__question-answers-label'\n        }, 'Ответы');\n\n        question.scoresLabel = newDOMElement_('th', {\n            'class': 'quiz-form__label quiz-form__question-scores-label'\n        }, 'Баллы');\n\n        question.messagesLabel = newDOMElement_('th', {\n            'class': 'quiz-form__label quiz-form__question-messages-label'\n        }, 'Комментарии к ответам');\n\n        question.destroyButtonLabel = newDOMElement_('th', {\n            'class': 'quiz-form__question-destroy-buttons-label'\n        });\n\n        question.addAnswerButtonRow = newDOMElement_('tr', {\n            'class': 'quiz-form__question-add-answer-button-row'\n        });\n\n        question.addAnswerButtonColumn = newDOMElement_('td', {\n            'class': 'quiz-form__question-add-answer-button-column'\n        });\n\n        question.addAnswerButton = newDOMElement_('span', {\n            'class': 'quiz-form__question-add-answer-button'\n        }, 'Добавить ответ');\n\n        question.addAnswerButtonPlus = newDOMElement_('img', {\n            'class': 'quiz-form__button-plus',\n            'src': '/public/app/img/quizzes/plus.svg'\n        });\n\n        question.holder.appendChild(question.number);\n\n        question.destroyButton.appendChild(question.destroyButtonCross);\n\n        question.holder.appendChild(question.destroyButton);\n        question.holder.appendChild(question.titleLabel);\n        question.holder.appendChild(question.title);\n\n        question.answersHead.appendChild(question.answersLabel);\n        question.answersHead.appendChild(question.scoresLabel);\n        question.answersHead.appendChild(question.messagesLabel);\n        question.answersHead.appendChild(question.destroyButtonLabel);\n\n        question.answersHolder.appendChild(question.answersHead);\n\n        question.addAnswerButton.insertBefore(\n            question.addAnswerButtonPlus,\n            question.addAnswerButton.firstChild\n        );\n\n        question.addAnswerButtonColumn.appendChild(question.addAnswerButton);\n\n        question.addAnswerButtonRow.appendChild(question.addAnswerButtonColumn);\n\n        question.answersHolder.appendChild(question.addAnswerButtonRow);\n\n        question.holder.appendChild(question.answersHolder);\n\n        quiz.nodes.questions.push(question);\n\n        if (questionData.answers) {\n\n            questionData.answers.map(function (current) {\n\n                appendAnswerBlock_(objectIndex, current);\n\n            });\n\n        } else {\n\n            appendAnswerBlock_(objectIndex);\n            appendAnswerBlock_(objectIndex);\n            appendAnswerBlock_(objectIndex);\n\n        }\n\n        insertDOMElement_(question);\n\n        updateDestroyIcons_(quiz.nodes.questions);\n\n    };\n\n\n    /**\n    * @private\n    * Message block creating function\n    * Creates a result message DOM element and appends it to the result messages list\n    */\n    var appendResultMessageBlock_ = function (messageData) {\n\n        var message = {};\n        var objectIndex = quiz.nodes.resultMessages.length;\n\n        messageData = messageData || {};\n\n        message.holder = newDOMElement_('tr', {\n            'class': 'quiz-form__message-holder',\n            'data-object-index': objectIndex\n        });\n\n        message.messageColumn = newDOMElement_('td', {\n            'class': 'quiz-form__message-message-column'\n        });\n\n        message.message = newDOMElement_('input', {\n            'type': 'text',\n            'class': 'quiz-form__message-message',\n            'value': messageData.message || '',\n            'required': '',\n            'form': 'null'\n        });\n\n        message.scoreColumn = newDOMElement_('td', {\n            'class': 'quiz-form__message-score-column'\n        });\n\n        message.score = newDOMElement_('input', {\n            'type': 'number',\n            'min': '0',\n            'step': '1',\n            'value': messageData.score || '0',\n            'class': 'quiz-form__message-score',\n            'required': '',\n            'form': 'null'\n        });\n\n        message.destroyButtonColumn = newDOMElement_('td', {\n            'class': 'quiz-form__message-destroy-button-column'\n        });\n\n        message.destroyButton = newDOMElement_('span', {\n            'class': 'quiz-form__message-destroy-button'\n        });\n\n        message.destroyButtonCross = newDOMElement_('img', {\n            'class': 'quiz-form__button-cross',\n            'src': '/public/app/img/quizzes/cross.svg'\n        });\n\n        message.messageColumn.appendChild(message.message);\n        message.scoreColumn.appendChild(message.score);\n\n        message.destroyButton.appendChild(message.destroyButtonCross);\n\n        message.destroyButtonColumn.appendChild(message.destroyButton);\n\n        message.holder.appendChild(message.messageColumn);\n        message.holder.appendChild(message.scoreColumn);\n        message.holder.appendChild(message.destroyButtonColumn);\n\n        quiz.nodes.resultMessages.push(message);\n\n        insertDOMElement_(message);\n\n        updateDestroyIcons_(quiz.nodes.resultMessages);\n\n    };\n\n\n    /**\n    * @private\n    * Object shifting function\n    * Sets numbers in the question with child elements to given index\n    * @param {object} obj - object in which numbers to be set\n    * @param {number} index - index to which child elements' attributes to be set\n    */\n    var setObjectNumber_ = function (obj, numberTo) {\n\n        obj.holder.dataset.objectIndex = numberTo - 1;\n\n        if (obj.number) {\n\n            obj.number.textContent = 'Вопрос ' + numberTo;\n\n        }\n\n    };\n\n\n    /**\n    * @private\n    * Updating destroy icons function\n    * Disables or enables destroy icon for the only element in container\n    * @param {object} container - object in which icon is to be disabled or enabled\n    */\n    var updateDestroyIcons_ = function (container) {\n\n        if (container.length <= 1) {\n\n            container[0].destroyButton.style.display = 'none';\n\n            if (container[0].firstChild) {\n\n                container[0].firstChild.style.display = 'none';\n\n            }\n\n        } else {\n\n            container[0].destroyButton.style.display = '';\n\n            if (container[0].firstChild) {\n\n                container[0].firstChild.style.display = '';\n\n            }\n\n        }\n\n    };\n\n\n    /**\n    * @private\n    * DOM element inserting function\n    * Inserts DOM element to DOM\n    * @param {object} obj - object in which DOM element to be inserted\n    */\n    var insertDOMElement_ = function (obj) {\n\n        var before;\n        var parent;\n\n        if (obj.answers) {\n\n            before = quiz.questionInsertAnchor;\n            parent = quiz.form;\n\n        } else if (obj.text) {\n\n            before = quiz.nodes.questions[parseInt(obj.holder.dataset.questionIndex)].addAnswerButtonRow;\n            parent = quiz.nodes.questions[parseInt(obj.holder.dataset.questionIndex)].answersHolder;\n\n        } else {\n\n            before = quiz.resultMessageInsertAnchor;\n            parent = quiz.resultMessagesHolder;\n\n        }\n\n        parent.insertBefore(obj.holder, before);\n\n    };\n\n\n    /**\n    * @private\n    * Element object destroying function\n    * Removes the DOM element of object from DOM and destroys object itself\n    * @param {object} container - list where object is to be destroyed\n    * @param {number} elementIndex - index of object in list\n    */\n    var destroyObject_ = function (container, elementIndex) {\n\n        container[elementIndex].holder.parentNode.removeChild(container[elementIndex].holder);\n\n        container.splice(elementIndex, 1);\n        for (var i = elementIndex; i < container.length; i++) {\n\n            setObjectNumber_(container[i], i + 1);\n\n        }\n\n        updateDestroyIcons_(container);\n\n    };\n\n\n    /**\n    * @private\n    * Event listeners setting function\n    * Set event listeners for insert and destroy buttons and form submission\n    */\n    var setEventListeners_ = function () {\n\n        quiz.form.onsubmit = function (event) {\n\n            event.preventDefault();\n\n            var json = {\n                'title': quiz.form.querySelector('[name=\"title\"]').value,\n                'description': quiz.form.querySelector('[name=\"description\"]').value,\n                'questions': [],\n                'resultMessages': [],\n                'shareMessage': quiz.form.querySelector('[name=\"shareMessage\"]').value\n            };\n\n            for (var i in quiz.nodes.questions) {\n\n                var jsonQuestion = {};\n\n                jsonQuestion.title = quiz.nodes.questions[i].title.value;\n                jsonQuestion.answers = [];\n\n                for (var j in quiz.nodes.questions[i].answers) {\n\n                    var jsonAnswer = {};\n\n                    jsonAnswer.text = quiz.nodes.questions[i].answers[j].text.value;\n                    jsonAnswer.score = quiz.nodes.questions[i].answers[j].score.value;\n                    jsonAnswer.message = quiz.nodes.questions[i].answers[j].message.value;\n\n                    jsonQuestion.answers.push(jsonAnswer);\n\n                }\n\n                json.questions.push(jsonQuestion);\n\n            }\n\n            for (var i in quiz.nodes.resultMessages) {\n\n                var jsonMessage = {};\n\n                jsonMessage.score = quiz.nodes.resultMessages[i].score.value;\n                jsonMessage.message = quiz.nodes.resultMessages[i].message.value;\n\n                json.resultMessages.push(jsonMessage);\n\n            };\n\n            quiz.form.appendChild(newDOMElement_('input', {\n                'type': 'hidden',\n                'name': 'quiz_data',\n                'value': JSON.stringify(json)\n            }));\n\n            quiz.form.submit();\n\n        };\n\n        quiz.questionInsertButton.onclick = function () {\n\n            appendQuestionBlock_();\n\n        };\n\n        quiz.resultMessageInsertButton.onclick = function () {\n\n            appendResultMessageBlock_();\n\n        };\n\n\n        quiz.form.onclick = function (event) {\n\n            var container;\n            var elementIndex;\n\n            if (event.target.classList.contains('quiz-form__question-destroy-button')) {\n\n                container = quiz.nodes.questions;\n                elementIndex = parseInt(event.target.parentNode.dataset.objectIndex);\n\n            } else if (event.target.parentNode.classList.contains('quiz-form__question-destroy-button')) {\n\n                container = quiz.nodes.questions;\n                elementIndex = parseInt(event.target.parentNode.parentNode.dataset.objectIndex);\n\n            } else if (event.target.classList.contains('quiz-form__question-answer-destroy-button')) {\n\n                container = quiz.nodes.questions[\n                    parseInt(event.target.parentNode.parentNode.dataset.questionIndex)\n                ].answers;\n                elementIndex = parseInt(event.target.parentNode.parentNode.dataset.objectIndex);\n\n            } else if (event.target.parentNode.classList.contains('quiz-form__question-answer-destroy-button')) {\n\n                container = quiz.nodes.questions[\n                    parseInt(event.target.parentNode.parentNode.parentNode.dataset.questionIndex)\n                ].answers;\n                elementIndex = parseInt(event.target.parentNode.parentNode.parentNode.dataset.objectIndex);\n\n            } else if (event.target.classList.contains('quiz-form__message-destroy-button')) {\n\n                container = quiz.nodes.resultMessages;\n                elementIndex = parseInt(event.target.parentNode.parentNode.dataset.objectIndex);\n\n            } else if (event.target.classList.contains('quiz-form__question-add-answer-button')) {\n\n                container = null;\n                elementIndex = parseInt(event.target.parentNode.parentNode.parentNode.parentNode.dataset.objectIndex);\n\n            }\n\n            if (container === null) {\n\n                appendAnswerBlock_(elementIndex);\n\n            } else if (container !== undefined) {\n\n                destroyObject_(container, elementIndex);\n\n            }\n\n        };\n\n    };\n\n\n    /**\n    * @private\n    * First result message adding function\n    * Inserts result message with number 1 to the form\n    */\n    var addInitialResultMessage_ = function () {\n\n        appendResultMessageBlock_();\n\n    };\n\n\n    /**\n    * @private\n    * First question adding function\n    * Inserts question with number 1 to the form\n    */\n    var addInitialQuestion_ = function () {\n\n        appendQuestionBlock_();\n\n    };\n\n\n    /**\n    * @private\n    * Initial form parameters setting adding function\n    * Sets form variable and insert buttons\n    */\n    var setInitialFormParams_ = function () {\n\n        quiz.form = document.forms.quizForm;\n        quiz.questionInsertAnchor = document.getElementById('questionInsertAnchor');\n        quiz.questionInsertButton = document.getElementById('questionInsertButton');\n        quiz.resultMessageInsertAnchor = document.getElementById('resultMessageInsertAnchor');\n        quiz.resultMessageInsertButton = document.getElementById('resultMessageInsertButton');\n        quiz.resultMessagesHolder = document.getElementById('resultMessagesHolder');\n\n    };\n\n\n    /**\n    * @private\n    * Initial destroy icons updating function\n    * Updates initially placed destroy icons\n    */\n    var updateInitialDestroyIcons_ = function () {\n\n        updateDestroyIcons_(quiz.nodes.questions);\n        updateDestroyIcons_(quiz.nodes.resultMessages);\n        updateDestroyIcons_(quiz.nodes.questions[0].answers);\n\n    };\n\n\n    var render = function (quizData) {\n\n        var questions = quizData.questions,\n            resultMessages = quizData.resultMessages;\n\n        document.querySelector('[name=\"title\"]').value = quizData.title;\n        document.querySelector('textarea[name=\"description\"]').textContent = quizData.description;\n        document.querySelector('[name=\"shareMessage\"]').value = quizData.shareMessage;\n\n        setInitialFormParams_();\n\n        resultMessages.map(function (current) {\n\n            appendResultMessageBlock_(current);\n\n        });\n\n        questions.map(function (current) {\n\n            appendQuestionBlock_(current);\n\n        });\n\n        setEventListeners_();\n\n        updateInitialDestroyIcons_();\n\n    };\n\n\n    /**\n     * @public\n     * Initialization function\n     * Initializes quiz form: inserts initial DOM elements, sets initial event listeners, etc\n     */\n    quiz.init = function (quizData) {\n\n        if (quizData) {\n\n            render(quizData);\n            return;\n\n        }\n\n        setInitialFormParams_();\n        addInitialQuestion_();\n        addInitialResultMessage_();\n        setEventListeners_();\n        updateInitialDestroyIcons_();\n\n    };\n\n    return quiz;\n\n})({});\n","/**\n* Module for scroll-up button\n*/\nmodule.exports = function () {\n\n    /**\n    * Page scroll offset to show scroll-up button\n    */\n    var SCROLL_UP_OFFSET = 100,\n        button = null;\n\n    var scrollPage = function () {\n\n        window.scrollTo(0, 0);\n\n    };\n\n    var windowScrollHandler = function () {\n\n        if (window.pageYOffset > SCROLL_UP_OFFSET) {\n\n            button.classList.add('show');\n\n        } else {\n\n            button.classList.remove('show');\n\n        }\n\n    };\n\n    /**\n    * Init method\n    * Fired after document is ready\n    */\n\n    var init = function () {\n\n        /** Find scroll-up button */\n        button = document.createElement('DIV');\n\n        button.classList.add('scroll-up');\n        document.body.appendChild(button);\n\n        /** Bind click event on scroll-up button */\n        button.addEventListener('click', scrollPage);\n\n        /** Global window scroll handler */\n        window.addEventListener('scroll', windowScrollHandler);\n\n    };\n\n    return {\n        init : init\n    };\n\n\n}();\n","/**\n * Module for social sharing\n */\nmodule.exports = (function ( sharer ) {\n\n    /**\n     * @param  {Object} data - Info about item we want to share\n     */\n    sharer.vkontakte = function (data) {\n\n        var link  = 'https://vk.com/share.php?';\n\n        link += 'url='          + data.url;\n        link += '&title='       + data.title;\n        link += '&description=' + data.desc;\n        link += '&image='       + data.img;\n        link += '&noparse=true';\n\n        sharer.popup( link, 'vkontakte'  );\n\n    };\n\n    sharer.facebook = function (data) {\n\n        var FB_APP_ID = 1740455756240878,\n            link      = 'https://www.facebook.com/dialog/share?display=popup';\n\n        link += '&app_id='       + FB_APP_ID;\n        link += '&href='         + data.url;\n        link += '&redirect_uri=' + document.location.href;\n\n        sharer.popup( link, 'facebook' );\n\n    };\n    sharer.twitter = function (data) {\n\n        var link = 'https://twitter.com/share?';\n\n        link += 'text='      + data.title;\n        link += '&url='      + data.url;\n        link += '&counturl=' + data.url;\n\n        sharer.popup( link, 'twitter' );\n\n    };\n\n    sharer.telegram = function (data) {\n\n        var link  = 'https://telegram.me/share/url';\n\n        link += '?text=' + data.title;\n        link += '&url='  + data.url;\n\n        sharer.popup( link, 'telegram' );\n\n    };\n    /**\n     * @param  {String} url\n     * @param  {String} socialType\n     */\n    sharer.popup = function ( url, socialType ) {\n\n        window.open( url, '', 'toolbar=0,status=0,width=626,height=436' );\n\n        /**\n        * Write analytics goal\n        */\n        if ( window.yaCounter32652805 ) {\n\n            window.yaCounter32652805.reachGoal('article-share', function () {}, this, {type: socialType, url: url});\n\n        }\n\n    };\n\n    /**\n     * Init sharer\n     * @param  {String} buttonsSelector  - on wich elements should bind sharing\n     */\n    sharer.init = function (buttonsSelector) {\n\n        console.assert(buttonsSelector, 'Sharer: buttons selector is missed');\n\n        var shareButtons = document.querySelectorAll(buttonsSelector);\n\n        for (var i = shareButtons.length - 1; i >= 0; i--) {\n\n            shareButtons[i].addEventListener('click', sharer.click, true);\n\n        }\n\n    };\n    /**\n     * @param  {Event} event\n     */\n    sharer.click = function (event) {\n\n        var target = event.target;\n\n        /**\n        * Social provider stores in data 'shareType' attribute on share-button\n        * But click may be fired on child-element in button, so we need to handle it.\n        */\n        var type = target.dataset.shareType || target.parentNode.dataset.shareType;\n\n        if (!sharer[type]) return;\n\n        /**\n        * Sanitize share params\n        * @todo test for taint strings\n        */\n        // for (key in window.shareData){\n        //      window.shareData[key] = encodeURIComponent(window.shareData[key]);\n        // }\n\n        var shareData = {\n            url:    target.dataset.url || target.parentNode.dataset.url,\n            title:  target.dataset.title || target.parentNode.dataset.title,\n            desc:   target.dataset.desc || target.parentNode.dataset.desc,\n            img:    target.dataset.img || target.parentNode.dataset.title\n        };\n\n        /**\n        * Fire click handler\n        */\n\n        sharer[type](shareData);\n\n    };\n\n\n\n    return sharer;\n\n})({});\n","/**\n * codex.showMoreNews module\n * Used in news block\n * Reveals more news when appender button is fired\n * Usage onclick=\"codex.showMoreNews.init( this );\"\n */\nvar showMoreNews = function () {\n\n    /**\n     * Helper for 'show more news' button\n     * @param {Element} button   - appender button\n     */\n    var init = function ( button ) {\n\n        var PORTION = 5; // Amount of news shown each time appender button is fired\n\n        var news = document.querySelectorAll('.news__list_item'),\n            hided = [];\n\n        for (var i = 0, newsItem; !!(newsItem = news[i]); i++) {\n\n            if ( newsItem.classList.contains('news__list_item--hidden') ) {\n\n                hided.push(newsItem);\n\n            }\n\n        }\n\n        /**\n         * @param {Element} item\n         * Remove PORTION of first elements from array hided\n         */\n        hided.splice(0, PORTION).map(function (item) {\n\n            item.classList.remove('news__list_item--hidden');\n\n        });\n\n        if (!hided.length) {\n\n            button.classList.add('news__list_item--hidden');\n\n        }\n\n    };\n\n    return {\n        init : init\n    };\n\n}({});\n\nmodule.exports = showMoreNews;\n","/**\n* Ajax file transport module\n* @author Savchenko Peter (vk.com/specc)\n* @param {Object} transport\n*/\nmodule.exports = (function (transport) {\n\n    transport.currentButtonClicked = {};\n\n    /**\n     * @param {Element} buttons\n     */\n    transport.init = function (buttons) {\n\n        transport.form  = document.getElementById('transportForm');\n        transport.input = document.getElementById('transportInput');\n\n        for (var i = buttons.length - 1; i >= 0; i--) {\n\n            buttons[i].addEventListener('click', transport.buttonCallback, false);\n\n        }\n\n        transport.input.addEventListener('change', transport.submitCallback, false );\n\n    };\n\n    /**\n     * @param {Event} event\n     */\n    transport.buttonCallback = function () {\n\n        var action       = this.dataset.action,\n            targetId     = this.dataset.id,\n            isMultiple   = !!this.dataset.multiple || false;\n\n        transport.fillForm({\n            action : action,\n            id     : targetId\n        });\n\n        if ( isMultiple ) {\n\n            transport.form.multiple = 'multiple';\n\n        }\n\n        transport.currentButtonClicked = this;\n        transport.input.click();\n\n    };\n\n    /**\n    * Append hidden inputs to tranport form\n    * @param {Object} data\n    */\n    transport.fillForm = function (data) {\n\n        var input,\n            alreadyAddedInput;\n\n        for ( var field in data ) {\n\n            if (typeof data[field] == 'undefined') {\n\n                continue;\n\n            }\n\n            alreadyAddedInput = transport.form.querySelector('input[name=' + field + ']');\n\n            if (typeof alreadyAddedInput != 'undefined' && alreadyAddedInput !== null) {\n\n                input = alreadyAddedInput;\n\n            } else {\n\n                input = document.createElement('input');\n\n            }\n\n            input.type = 'hidden';\n            input.name = field;\n            input.value = data[field];\n\n            transport.form.appendChild(input);\n\n        }\n\n    };\n\n    transport.submitCallback = function () {\n\n        const FILE_MAX_SIZE = 30 * 1024 * 1024; // 30 MB\n\n        var files = transport.getFileObject( this );\n\n        for (var i = files.length - 1; i >= 0; i--) {\n\n            /** Validate file extension */\n            if ( !transport.validateExtension(files[i]) || !transport.validateMIME(files[i]) ) {\n\n                window.console && console.warn('Wrong file type: %o', + files[i].name);\n                return;\n\n            }\n\n            /** Validate file size */\n            if ( !transport.validateSize( files[i], FILE_MAX_SIZE) ) {\n\n                window.console && console.warn('File size exceeded limit: %o MB', files[i].size / (1024*1024).toFixed(2) );\n                return;\n\n            }\n\n        }\n\n        transport.currentButtonClicked.className += ' loading';\n        transport.form.submit();\n\n    };\n\n    /**\n    * Fires from transport-frame window\n    * @param {Object} response\n    */\n    transport.response = function ( response ) {\n\n        transport.currentButtonClicked.className = transport.currentButtonClicked.className.replace('loading', '');\n\n        if (response.callback) {\n\n            eval(response.callback);\n\n        }\n\n        if ( response.result ) {\n\n            if ( response.result == 'error' ) {\n\n                window.console && console.warn( response.error_description || 'error' );\n\n            }\n\n        }\n\n    };\n    /**\n     * @param  {[Element]} fileInput\n     * @return {[type]}           [description]\n     */\n    transport.getFileObject = function ( fileInput ) {\n\n        if ( !fileInput ) return false;\n        /**\n        * Workaround with IE that doesn't support File API\n        * @todo test and delete this crutch\n        */\n        return typeof ActiveXObject == 'function' ? (new ActiveXObject('Scripting.FileSystemObject')).getFile(fileInput.value) : fileInput.files;\n\n    };\n\n    /**\n     * @param {Object} accept\n     * @param {Object} fileObj\n     * @return {Boolean}\n     */\n    transport.validateMIME = function ( fileObj, accept ) {\n\n\n        accept = typeof accept == 'array' ? accept : ['image/jpeg', 'image/png'];\n\n        for (var i = accept.length - 1; i >= 0; i--) {\n\n            if ( fileObj.type == accept[i] ) return true;\n\n        }\n        return false;\n\n    };\n\n    transport.validateExtension = function ( fileObj, accept ) {\n\n        var ext = fileObj.name.match(/\\.(\\w+)($|#|\\?)/);\n\n        if (!ext) return false;\n\n        ext = ext[1].toLowerCase();\n\n        accept = typeof accept == 'array' ? accept : ['jpg', 'jpeg', 'png'];\n\n        for (var i = accept.length - 1; i >= 0; i--) {\n\n            if ( ext == accept[i] ) return true;\n\n        }\n\n        return false;\n\n    };\n\n    transport.validateSize = function ( fileObj, maxSize ) {\n\n        return fileObj.size < maxSize;\n\n    };\n\n    return transport;\n\n})({});\n","/**\n * Module for VK community widget: https://vk.com/dev/Community\n * Adds vkWidget to page\n */\nvar vkWidget = function () {\n\n    var targetId, targetView, communityId,\n        VK_API_URI = 'https://vk.com/js/api/openapi.js';\n\n    /**\n     * Initialization of module\n     *\n     * @param  {[Object]} params\n     * @param {int} params.id - element id, where widget is appended\n     * @param {int} params.display.mode - widget appearance (\"3\" - show people in the community)\n     * @param {int|string} params.display.width - set widget width to a fixed number or auto\n     * @param {int} params.communityId - id of VK community\n     *\n     * @example\n     * vkWidget.init({\n     *   id: 'vk_groups',\n     *   display: {\n     *       'mode': 3,\n     *       'width': 'auto'\n     *   },\n     *   communityId: 103229636\n     * });\n     */\n    var init = function (params) {\n\n        targetId = params.id || null,\n        targetView = params.display || { 'mode': 3, 'width': 'auto' },\n        communityId = params.communityId || 0;\n\n        if (document.getElementById(targetId) == undefined) {\n\n            console.log('Cannot find element with id '+ targetId);\n            return;\n\n        };\n\n        loadScript();\n\n    };\n\n    /**\n     * Loads VK Api script to initialize a widget\n     * and appends it to page\n     */\n    var loadScript = function () {\n\n        var vkApiScript = document.createElement('SCRIPT');\n\n        vkApiScript.src = VK_API_URI;\n\n        vkApiScript.setAttribute('async', 'true');\n\n        vkApiScript.onload = showWidget;\n\n        document.body.appendChild(vkApiScript);\n\n    };\n\n    /**\n     * Runs widget initiating from vkApi\n     */\n    var showWidget = function () {\n\n        window.VK.Widgets.Group(targetId, targetView, communityId);\n\n    };\n\n    return {\n        init : init\n    };\n\n}({});\n\nmodule.exports = vkWidget;"],"sourceRoot":""}